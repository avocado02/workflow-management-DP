<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create New Project - Post-Production Workflow</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
    }

    .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        font-weight: 700;
    }

    .header p {
        font-size: 1.1rem;
        opacity: 0.9;
    }

    .progress-bar {
        background: #f8f9fa;
        padding: 0;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .progress-steps {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .step {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .step-number {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e9ecef;
        color: #6c757d;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .step-number.active {
        background: #667eea;
        color: white;
        transform: scale(1.1);
    }

    .step-number.completed {
        background: #28a745;
        color: white;
    }

    .step-line {
        width: 60px;
        height: 2px;
        background: #e9ecef;
        transition: all 0.3s ease;
    }

    .step-line.completed {
        background: #28a745;
    }

    .form-container {
        padding: 40px;
    }

    .step-content {
        display: none;
    }

    .step-content.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    .form-group {
        margin-bottom: 25px;
    }

    .form-group.full-width {
        grid-column: span 2;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #343a40;
        font-size: 0.95rem;
    }

    input[type="text"],
    input[type="email"],
    input[type="date"],
    input[type="number"],
    select,
    textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
    }

    input:focus,
    select:focus,
    textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .input-error {
        border-color: #dc3545 !important;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1) !important;
    }

    .error-message {
        color: #dc3545;
        font-size: 0.875rem;
        margin-top: 5px;
        display: none;
    }

    .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 15px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
    }

    .checkbox-item {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .toggle-switch {
        position: relative;
        width: 60px;
        height: 30px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 30px;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
    }

    input:checked + .slider {
        background-color: #667eea;
    }

    input:checked + .slider:before {
        transform: translateX(30px);
    }

    .conditional-field {
        margin-left: 20px;
        padding: 15px;
        background: white;
        border-radius: 8px;
        border-left: 4px solid #667eea;
        display: none;
    }

    .conditional-field.show {
        display: block;
        animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
        from { opacity: 0; max-height: 0; }
        to { opacity: 1; max-height: 200px; }
    }

    .team-member-card {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
        margin-bottom: 15px;
    }

    .team-member-info {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .member-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: #667eea;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 1.2rem;
    }

    .member-details h4 {
        margin: 0 0 5px 0;
        color: #343a40;
    }

    .member-role {
        color: #6c757d;
        font-size: 0.9rem;
    }

    .availability-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #28a745;
        margin-left: 10px;
    }

    .availability-indicator.busy {
        background: #ffc107;
    }

    .availability-indicator.unavailable {
        background: #dc3545;
    }

    .server-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .server-card {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .server-card:hover {
        border-color: #667eea;
        transform: translateY(-3px);
    }

    .server-card.selected {
        border-color: #667eea;
        background: rgba(102, 126, 234, 0.1);
    }

    .server-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
    }

    .server-card h4 {
        margin-bottom: 10px;
        color: #343a40;
    }

    .server-card p {
        color: #6c757d;
        font-size: 0.9rem;
        margin-bottom: 10px;
    }

    .buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 40px;
        padding-top: 30px;
        border-top: 1px solid #e9ecef;
    }

    .btn {
        padding: 12px 30px;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background: #545b62;
        transform: translateY(-2px);
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
    }

    .summary-section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .summary-section h3 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.3rem;
    }

    .summary-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #e9ecef;
    }

    .summary-item:last-child {
        border-bottom: none;
    }

    .budget-estimate {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin-top: 20px;
    }

    .budget-amount {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 5px;
    }

    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
    }

    .modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        background: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .close-modal {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #6c757d;
    }

    .staff-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 15px;
        margin: 20px 0;
        max-height: 300px;
        overflow-y: auto;
    }

    .staff-card {
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .staff-card:hover {
        border-color: #667eea;
    }

    .staff-card.selected {
        border-color: #667eea;
        background: rgba(102, 126, 234, 0.1);
    }

    .server-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }

    .server-chip {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 20px;
        padding: 8px 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }

    .server-chip:hover {
        border-color: #667eea;
    }

    .server-chip.selected {
        border-color: #667eea;
        background: rgba(102, 126, 234, 0.1);
        color: #667eea;
    }

    .empty-state {
        text-align: center;
        padding: 40px;
        color: #6c757d;
        background: #f8f9fa;
        border-radius: 10px;
        border: 2px dashed #e9ecef;
    }

    @media (max-width: 768px) {
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .progress-steps {
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .step-line {
            display: none;
        }
    }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Create New Project</h1>
        <p>Set up your post-production workflow in 6 easy steps</p>
    </div>

    <div class="progress-bar">
        <div class="progress-steps">
            <div class="step">
                <div class="step-number active" id="step-1">1</div>
                <span>Basic Info</span>
            </div>
            <div class="step-line" id="line-1"></div>
            <div class="step">
                <div class="step-number" id="step-2">2</div>
                <span>Requirements</span>
            </div>
            <div class="step-line" id="line-2"></div>
            <div class="step">
                <div class="step-number" id="step-3">3</div>
                <span>Budget</span>
            </div>
            <div class="step-line" id="line-3"></div>
            <div class="step">
                <div class="step-number" id="step-4">4</div>
                <span>Servers</span>
            </div>
            <div class="step-line" id="line-4"></div>
            <div class="step">
                <div class="step-number" id="step-5">5</div>
                <span>Team</span>
            </div>
            <div class="step-line" id="line-5"></div>
            <div class="step">
                <div class="step-number" id="step-6">6</div>
                <span>Review</span>
            </div>
        </div>
    </div>

    <div class="form-container">
        <!-- Step 1: Basic Information -->
        <div class="step-content active" id="content-1">
            <h2 style="margin-bottom: 30px; color: #667eea;">Project Basic Information</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="project-name">Project Name *</label>
                    <input type="text" id="project-name" placeholder="Enter project name" required>
                    <div class="error-message" id="project-name-error">Project name is required</div>
                </div>
                <div class="form-group">
                    <label for="project-type">Project Type *</label>
                    <select id="project-type" required>
                        <option value="">Select Project Type</option>
                        <option value="internal">Internal Project</option>
                        <option value="external">External Client</option>
                        <option value="joint">Joint Project</option>
                    </select>
                    <div class="error-message" id="project-type-error">Project type is required</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="project-code">Project Code</label>
                    <input type="text" id="project-code" placeholder="Auto-generated" readonly>
                </div>
                <div class="form-group">
                    <label for="project-priority">Project Priority</label>
                    <select id="project-priority">
                        <option value="normal">Normal</option>
                        <option value="high">High Priority</option>
                        <option value="urgent">Urgent</option>
                        <option value="low">Low Priority</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="client-name">Client Name *</label>
                    <input type="text" id="client-name" placeholder="Enter client name" required>
                    <div class="error-message" id="client-name-error">Client name is required</div>
                </div>
                <div class="form-group">
                    <label for="client-email">Client Email</label>
                    <input type="email" id="client-email" placeholder="client@example.com">
                    <div class="error-message" id="client-email-error">Please enter a valid email address</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="production-start">Production Start Date *</label>
                    <input type="date" id="production-start" required>
                    <div class="error-message" id="production-start-error">Start date is required</div>
                </div>
                <div class="form-group">
                    <label for="production-end">Production End Date *</label>
                    <input type="date" id="production-end" required>
                    <div class="error-message" id="production-end-error">End date must be after start date</div>
                </div>
            </div>

            <div class="form-group full-width">
                <label for="project-description">Project Description</label>
                <textarea id="project-description" rows="4" placeholder="Brief description of the project..."></textarea>
            </div>
        </div>

        <!-- Step 2: Requirements -->
        <div class="step-content" id="content-2">
            <h2 style="margin-bottom: 30px; color: #667eea;">Project Requirements</h2>
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="silent-film">
                        <span class="slider"></span>
                    </label>
                    <label for="silent-film" style="margin: 0; cursor: pointer;">Is this a silent film?</label>
                </div>

                <div class="checkbox-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="music-required" onchange="toggleConditional('music-required', 'music-details')">
                        <span class="slider"></span>
                    </label>
                    <label for="music-required" style="margin: 0; cursor: pointer;">Music Required?</label>
                </div>
                
                <div class="conditional-field" id="music-details">
                    <label for="publisher">Music Publisher</label>
                    <select id="publisher">
                        <option value="">Select Publisher</option>
                        <option value="universal">Universal Music Group</option>
                        <option value="sony">Sony Music</option>
                        <option value="warner">Warner Music Group</option>
                        <option value="independent">Independent Publisher</option>
                    </select>
                </div>

                <div class="checkbox-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="vfx-required" onchange="toggleConditional('vfx-required', 'vfx-details')">
                        <span class="slider"></span>
                    </label>
                    <label for="vfx-required" style="margin: 0; cursor: pointer;">VFX Required?</label>
                </div>
                
                <div class="conditional-field" id="vfx-details">
                    <label for="vfx-complexity">VFX Complexity Level</label>
                    <select id="vfx-complexity">
                        <option value="basic">Basic (Color correction, simple compositing)</option>
                        <option value="intermediate">Intermediate (Green screen, motion graphics)</option>
                        <option value="advanced">Advanced (3D integration, complex simulations)</option>
                    </select>
                </div>

                <div class="checkbox-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="restoration-required">
                        <span class="slider"></span>
                    </label>
                    <label for="restoration-required" style="margin: 0; cursor: pointer;">Film Restoration Required?</label>
                </div>

                <div class="checkbox-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="color-grading">
                        <span class="slider"></span>
                    </label>
                    <label for="color-grading" style="margin: 0; cursor: pointer;">Color Grading Required?</label>
                </div>
            </div>

            <div class="form-row" style="margin-top: 30px;">
                <div class="form-group">
                    <label for="film-duration">Film Duration (minutes)</label>
                    <input type="number" id="film-duration" placeholder="120" min="1" max="600">
                </div>
                <div class="form-group">
                    <label for="budget-range">Estimated Budget Range</label>
                    <select id="budget-range">
                        <option value="small">$5K - $25K</option>
                        <option value="medium">$25K - $100K</option>
                        <option value="large">$100K - $500K</option>
                        <option value="xlarge">$500K+</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Step 3: Budget Details -->
        <div class="step-content" id="content-3">
            <h2 style="margin-bottom: 30px; color: #667eea;">Budget Planning</h2>
            
            <div style="background: #e8f5e8; border-radius: 10px; padding: 20px; margin-bottom: 30px;">
                <h4 style="color: #155724; margin-bottom: 15px;">Budget Breakdown</h4>
                <p style="color: #155724; margin: 0;">Based on your requirements, here's an estimated budget breakdown:</p>
            </div>

            <div class="summary-section">
                <h3>Estimated Costs</h3>
                <div class="summary-item">
                    <strong>Base Project Cost:</strong>
                    <span id="base-cost">$10,000</span>
                </div>
                <div class="summary-item">
                    <strong>Duration Cost:</strong>
                    <span id="duration-cost">$0</span>
                </div>
                <div class="summary-item">
                    <strong>VFX Cost:</strong>
                    <span id="vfx-cost">$0</span>
                </div>
                <div class="summary-item">
                    <strong>Music Cost:</strong>
                    <span id="music-cost">$0</span>
                </div>
                <div class="summary-item">
                    <strong>Other Requirements:</strong>
                    <span id="other-cost">$0</span>
                </div>
                <div class="summary-item" style="font-weight: bold; border-top: 2px solid #667eea; padding-top: 15px; margin-top: 15px;">
                    <strong>Total Estimated Cost:</strong>
                    <span id="total-cost">$10,000</span>
                </div>
            </div>
        </div>

        <!-- Step 4: Server Creation & Configuration -->
        <div class="step-content" id="content-4">
            <h2 style="margin-bottom: 30px; color: #667eea;">Server Creation & Configuration</h2>
            
            <div style="background: #e3f2fd; border-radius: 10px; padding: 20px; margin-bottom: 30px;">
                <h4 style="color: #1565c0; margin-bottom: 15px;">Server Setup Based on Requirements</h4>
                <p style="color: #1565c0; margin: 0;">We'll automatically configure servers based on your project requirements. You can also add custom servers as needed.</p>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="color: #667eea; margin: 0;">Recommended Servers</h3>
                <button type="button" class="btn btn-primary" onclick="addCustomServer()" style="padding: 8px 16px; font-size: 0.9rem;">
                    Add Custom Server
                </button>
            </div>

            <div id="recommended-servers" class="server-grid">
                <!-- Recommended servers will be populated based on requirements -->
            </div>

            <div id="custom-servers-container" style="margin-top: 40px; display: none;">
                <h3 style="color: #667eea; margin-bottom: 20px;">Custom Servers</h3>
                <div id="custom-servers-list" class="server-grid">
                    <!-- Custom servers will be added here -->
                </div>
            </div>
        </div>

        <!-- Step 5: Team Assembly -->
        <div class="step-content" id="content-5">
            <h2 style="margin-bottom: 30px; color: #667eea;">Team Assembly</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="project-manager">Project Manager *</label>
                    <select id="project-manager" required>
                        <option value="">Select Project Manager</option>
                        <option value="sarah-johnson">Sarah Johnson (Available)</option>
                        <option value="mike-chen">Mike Chen (Busy until 09/15)</option>
                        <option value="emma-davis">Emma Davis (Available)</option>
                    </select>
                    <div class="error-message" id="project-manager-error">Project manager is required</div>
                </div>
                <div class="form-group">
                    <label for="team-lead">Team Lead</label>
                    <select id="team-lead">
                        <option value="">Select Team Lead</option>
                        <option value="alex-rivera">Alex Rivera (Available)</option>
                        <option value="jordan-kim">Jordan Kim (Available)</option>
                        <option value="taylor-brown">Taylor Brown (Busy until 09/20)</option>
                    </select>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin: 30px 0 20px 0;">
                <h3 style="color: #667eea; margin: 0;">Team Members</h3>
                <button type="button" class="btn btn-primary" onclick="showAddMemberModal()" style="padding: 8px 16px; font-size: 0.9rem;">
                    Add Team Member
                </button>
            </div>

            <div id="team-members-container">
                <div class="empty-state" id="empty-team-state">
                    <div style="font-size: 3rem; margin-bottom: 10px;">üë•</div>
                    <p>No team members added yet</p>
                    <small>Click "Add Team Member" to start building your team</small>
                </div>
            </div>
        </div>

        <!-- Step 6: Review & Summary -->
        <div class="step-content" id="content-6">
            <h2 style="margin-bottom: 30px; color: #667eea;">Project Summary & Review</h2>
            
            <div class="summary-section">
                <h3>Project Details</h3>
                <div class="summary-item">
                    <strong>Project Name:</strong>
                    <span id="summary-name">-</span>
                </div>
                <div class="summary-item">
                    <strong>Project Type:</strong>
                    <span id="summary-type">-</span>
                </div>
                <div class="summary-item">
                    <strong>Priority:</strong>
                    <span id="summary-priority">-</span>
                </div>
                <div class="summary-item">
                    <strong>Client:</strong>
                    <span id="summary-client">-</span>
                </div>
                <div class="summary-item">
                    <strong>Duration:</strong>
                    <span id="summary-dates">-</span>
                </div>
                <div class="summary-item">
                    <strong>Film Length:</strong>
                    <span id="summary-duration">-</span>
                </div>
            </div>
            
            <div class="summary-section">
                <h3>Requirements</h3>
                <div class="summary-item">
                    <strong>Silent Film:</strong>
                    <span id="summary-silent">No</span>
                </div>
                <div class="summary-item">
                    <strong>Music Required:</strong>
                    <span id="summary-music">No</span>
                </div>
                <div class="summary-item">
                    <strong>VFX Required:</strong>
                    <span id="summary-vfx">No</span>
                </div>
                <div class="summary-item">
                    <strong>Restoration:</strong>
                    <span id="summary-restoration">No</span>
                </div>
                <div class="summary-item">
                    <strong>Color Grading:</strong>
                    <span id="summary-color">No</span>
                </div>
            </div>

            <div class="summary-section">
                <h3>Servers</h3>
                <div class="summary-item">
                    <strong>Configured Servers:</strong>
                    <span id="summary-servers">0 configured</span>
                </div>
            </div>

            <div class="summary-section">
                <h3>Team</h3>
                <div class="summary-item">
                    <strong>Project Manager:</strong>
                    <span id="summary-pm">-</span>
                </div>
                <div class="summary-item">
                    <strong>Team Lead:</strong>
                    <span id="summary-lead">-</span>
                </div>
                <div class="summary-item">
                    <strong>Team Members:</strong>
                    <span id="summary-team">0 selected</span>
                </div>
            </div>

            <div class="budget-estimate">
                <div class="budget-amount" id="estimated-budget">$45,000</div>
                <div>Estimated Project Budget</div>
                <small style="opacity: 0.8;">Based on duration, requirements, and team size</small>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: #d1ecf1; border-radius: 10px;">
                <h4 style="color: #0c5460; margin-bottom: 15px;">Next Steps After Creation</h4>
                <ul style="color: #0c5460; padding-left: 20px;">
                    <li>Server authentication credentials will be generated</li>
                    <li>Team members will receive project access notifications</li>
                    <li>DaVinci Resolve project integration will be configured</li>
                    <li>Budget templates will be applied based on requirements</li>
                    <li>Project dashboard will be activated for real-time tracking</li>
                </ul>
            </div>
        </div>

        <div class="buttons">
            <button type="button" class="btn btn-secondary" onclick="previousStep()" id="prev-btn" style="display: none;">
                Previous
            </button>
            <div></div>
            <button type="button" class="btn btn-primary" onclick="nextStep()" id="next-btn">
                Next
            </button>
        </div>
    </div>

    <!-- Add Team Member Modal -->
    <div class="modal" id="add-member-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="margin: 0; color: #667eea;">Add Team Member</h3>
                <button class="close-modal" onclick="closeAddMemberModal()">&times;</button>
            </div>
            
            <div class="form-group">
                <label>Search Staff Members</label>
                <input type="text" id="staff-search" placeholder="Search by name, department, or skills..." onkeyup="filterStaff()">
            </div>

            <div class="staff-grid" id="staff-grid">
                <!-- Staff members will be populated here -->
            </div>

            <div id="member-assignment" style="display: none;">
                <h4 style="color: #667eea; margin: 20px 0 15px 0;">Assignment Details</h4>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="member-role">Project Role *</label>
                        <select id="member-role" required>
                            <option value="">Select Role</option>
                            <option value="vfx-artist">VFX Artist</option>
                            <option value="compositor">Compositor</option>
                            <option value="3d-artist">3D Artist</option>
                            <option value="sound-editor">Sound Editor</option>
                            <option value="sound-mixer">Sound Mixer</option>
                            <option value="composer">Composer</option>
                            <option value="colorist">Colorist</option>
                            <option value="color-assistant">Color Assistant</option>
                            <option value="restoration-artist">Restoration Artist</option>
                            <option value="qc-specialist">QC Specialist</option>
                            <option value="editor">Editor</option>
                            <option value="assistant-editor">Assistant Editor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="initial-task">Initial Task</label>
                        <input type="text" id="initial-task" placeholder="e.g., Shot breakdown analysis">
                    </div>
                </div>

                <div class="server-selection">
                    <label style="font-weight: 600; margin-bottom: 10px; display: block;">Server Access</label>
                    <p style="margin-bottom: 15px; color: #6c757d; font-size: 0.9rem;">Select servers this team member should have access to</p>
                    
                    <div class="server-chips">
                        <div class="server-chip" onclick="toggleServerChip(this, 'vfx-server')" data-server="vfx-server">
                            VFX Render Server 01
                        </div>
                        <div class="server-chip" onclick="toggleServerChip(this, 'audio-server')" data-server="audio-server">
                            Audio Processing Server
                        </div>
                        <div class="server-chip" onclick="toggleServerChip(this, 'color-server')" data-server="color-server">
                            Color Grading Server
                        </div>
                        <div class="server-chip" onclick="toggleServerChip(this, 'storage-server')" data-server="storage-server">
                            Storage Server Alpha
                        </div>
                        <div class="server-chip" onclick="toggleServerChip(this, 'restoration-server')" data-server="restoration-server">
                            Restoration Workstation
                        </div>
                        <div class="server-chip" onclick="toggleServerChip(this, 'backup-server')" data-server="backup-server">
                            Backup Server
                        </div>
                    </div>
                </div>

                <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e9ecef;">
                    <button type="button" class="btn btn-secondary" onclick="closeAddMemberModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addTeamMember()">Add to Team</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let currentStep = 1;
    const totalSteps = 6;
    let selectedStaffMember = null;
    let teamMembers = [];
    let projectServers = [];
    let customServerCounter = 1;
    
    const staffDatabase = [
        { id: 'john-smith', name: 'John Smith', department: 'VFX', role: 'VFX Artist', availability: 'available', skills: ['Compositing', 'Motion Graphics', 'After Effects'] },
        { id: 'lisa-wong', name: 'Lisa Wong', department: 'VFX', role: 'Compositor', availability: 'busy', skills: ['Nuke', 'Flame', 'Color Correction'] },
        { id: 'david-park', name: 'David Park', department: 'VFX', role: '3D Artist', availability: 'available', skills: ['Maya', 'Blender', '3D Modeling'] },
        { id: 'maria-garcia', name: 'Maria Garcia', department: 'Sound', role: 'Sound Editor', availability: 'available', skills: ['Pro Tools', 'Audio Editing', 'Sound Design'] },
        { id: 'tom-wilson', name: 'Tom Wilson', department: 'Sound', role: 'Mixer', availability: 'unavailable', skills: ['Mixing', 'Mastering', 'Audio Post'] },
        { id: 'anna-lee', name: 'Anna Lee', department: 'Sound', role: 'Composer', availability: 'available', skills: ['Music Composition', 'Logic Pro', 'Orchestration'] },
        { id: 'james-taylor', name: 'James Taylor', department: 'Color', role: 'Colorist', availability: 'available', skills: ['DaVinci Resolve', 'Color Grading', 'HDR'] },
        { id: 'sophie-martinez', name: 'Sophie Martinez', department: 'Color', role: 'Color Assistant', availability: 'busy', skills: ['DaVinci Resolve', 'Color Correction'] },
        { id: 'robert-chang', name: 'Robert Chang', department: 'Restoration', role: 'Restoration Artist', availability: 'available', skills: ['Film Restoration', 'Scratch Removal', 'Image Enhancement'] },
        { id: 'nina-patel', name: 'Nina Patel', department: 'Restoration', role: 'QC Specialist', availability: 'available', skills: ['Quality Control', 'Technical Review', 'Standards Compliance'] },
        { id: 'alex-rivera', name: 'Alex Rivera', department: 'Editorial', role: 'Editor', availability: 'available', skills: ['Avid Media Composer', 'Final Cut Pro', 'Premiere Pro'] },
        { id: 'jordan-kim', name: 'Jordan Kim', department: 'Editorial', role: 'Assistant Editor', availability: 'available', skills: ['Media Management', 'Assembly Editing', 'Organization'] }
    ];

    function updateProgressBar() {
        for (let i = 1; i <= totalSteps; i++) {
            const stepElement = document.getElementById(`step-${i}`);
            const lineElement = document.getElementById(`line-${i}`);
            
            if (stepElement) {
                if (i < currentStep) {
                    stepElement.className = 'step-number completed';
                } else if (i === currentStep) {
                    stepElement.className = 'step-number active';
                } else {
                    stepElement.className = 'step-number';
                }
            }
            
            if (lineElement) {
                if (i < currentStep) {
                    lineElement.className = 'step-line completed';
                } else {
                    lineElement.className = 'step-line';
                }
            }
        }
    }

    function showStep(step) {
        // Hide all steps
        for (let i = 1; i <= totalSteps; i++) {
            const contentElement = document.getElementById(`content-${i}`);
            if (contentElement) {
                contentElement.classList.remove('active');
            }
        }
        
        // Show current step
        const currentContent = document.getElementById(`content-${step}`);
        if (currentContent) {
            currentContent.classList.add('active');
        }
        
        // Special handling for different steps
        if (step === 3) {
            updateBudgetBreakdown();
        } else if (step === 4) {
            generateRecommendedServers();
        }
        
        // Update buttons
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        
        if (prevBtn) {
            prevBtn.style.display = step > 1 ? 'block' : 'none';
        }
        
        if (nextBtn) {
            if (step === totalSteps) {
                nextBtn.textContent = 'Create Project';
                nextBtn.onclick = createProject;
            } else {
                nextBtn.textContent = 'Next';
                nextBtn.onclick = nextStep;
            }
        }
    }

    function nextStep() {
        if (validateCurrentStep()) {
            if (currentStep < totalSteps) {
                currentStep++;
                if (currentStep === totalSteps) {
                    updateSummary();
                }
                updateProgressBar();
                showStep(currentStep);
            }
        }
    }

    function previousStep() {
        if (currentStep > 1) {
            currentStep--;
            updateProgressBar();
            showStep(currentStep);
        }
    }

    function validateCurrentStep() {
        const requiredFields = {
            1: [
                { id: 'project-name', message: 'Project name is required' },
                { id: 'project-type', message: 'Project type is required' },
                { id: 'client-name', message: 'Client name is required' },
                { id: 'production-start', message: 'Start date is required' },
                { id: 'production-end', message: 'End date is required', validator: validateDateRange }
            ],
            2: [],
            3: [],
            4: [],
            5: [
                { id: 'project-manager', message: 'Project manager is required' }
            ],
            6: []
        };

        const fields = requiredFields[currentStep] || [];
        let isValid = true;

        // Clear previous errors
        document.querySelectorAll('.error-message').forEach(msg => {
            msg.style.display = 'none';
        });
        document.querySelectorAll('.input-error').forEach(field => {
            field.classList.remove('input-error');
        });

        fields.forEach(field => {
            const element = document.getElementById(field.id);
            const errorElement = document.getElementById(`${field.id}-error`);
            
            let fieldValid = true;
            
            if (field.validator) {
                fieldValid = field.validator();
            } else if (element) {
                fieldValid = element.value.trim() !== '';
            }

            // Special validation for email
            if (field.id === 'client-email' && element && element.value.trim()) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                fieldValid = emailRegex.test(element.value.trim());
            }

            if (!fieldValid) {
                if (element) element.classList.add('input-error');
                if (errorElement) errorElement.style.display = 'block';
                isValid = false;
            } else {
                if (element) element.classList.remove('input-error');
                if (errorElement) errorElement.style.display = 'none';
            }
        });

        return isValid;
    }

    function validateDateRange() {
        const startElement = document.getElementById('production-start');
        const endElement = document.getElementById('production-end');
        
        if (startElement && endElement && startElement.value && endElement.value) {
            const startDate = new Date(startElement.value);
            const endDate = new Date(endElement.value);
            return endDate >= startDate;
        }
        return true;
    }

    function toggleConditional(checkboxId, conditionalId) {
        const checkbox = document.getElementById(checkboxId);
        const conditional = document.getElementById(conditionalId);
        
        if (checkbox && conditional) {
            if (checkbox.checked) {
                conditional.classList.add('show');
            } else {
                conditional.classList.remove('show');
            }
        }
    }

    function updateBudgetBreakdown() {
        let baseCost = 10000;
        let durationCost = 0;
        let vfxCost = 0;
        let musicCost = 0;
        let otherCost = 0;

        // Calculate duration cost
        const durationElement = document.getElementById('film-duration');
        if (durationElement && durationElement.value) {
            const duration = parseInt(durationElement.value) || 0;
            durationCost = duration * 200;
        }

        // Calculate VFX cost
        const vfxElement = document.getElementById('vfx-required');
        if (vfxElement && vfxElement.checked) {
            const complexityElement = document.getElementById('vfx-complexity');
            const complexity = complexityElement ? complexityElement.value : 'basic';
            const vfxCosts = { basic: 8000, intermediate: 20000, advanced: 50000 };
            vfxCost = vfxCosts[complexity] || 8000;
        }

        // Calculate music cost
        const musicElement = document.getElementById('music-required');
        if (musicElement && musicElement.checked) {
            musicCost = 5000;
        }

        // Calculate other costs
        const restorationElement = document.getElementById('restoration-required');
        const colorElement = document.getElementById('color-grading');
        const duration = parseInt(document.getElementById('film-duration')?.value || '60');
        
        if (restorationElement && restorationElement.checked) {
            otherCost += duration * 300;
        }
        if (colorElement && colorElement.checked) {
            otherCost += duration * 100;
        }

        // Update display
        const elements = {
            'base-cost': baseCost,
            'duration-cost': durationCost,
            'vfx-cost': vfxCost,
            'music-cost': musicCost,
            'other-cost': otherCost,
            'total-cost': baseCost + durationCost + vfxCost + musicCost + otherCost
        };

        Object.keys(elements).forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = `${elements[id].toLocaleString()}`;
            }
        });
    }

    function generateRecommendedServers() {
        const recommendedContainer = document.getElementById('recommended-servers');
        if (!recommendedContainer) return;
        
        recommendedContainer.innerHTML = '';
        projectServers = [];

        // Base servers everyone needs
        const baseServers = [
            { id: 'storage-main', name: 'Main Storage Server', type: 'storage', icon: 'üíæ', description: 'Primary file storage and backup', required: true },
            { id: 'backup-server', name: 'Backup Server', type: 'backup', icon: '‚òÅÔ∏è', description: 'Automated backup system', required: true }
        ];

        // Additional servers based on requirements
        const additionalServers = [];
        
        if (document.getElementById('vfx-required')?.checked) {
            additionalServers.push({ id: 'vfx-render', name: 'VFX Render Server', type: 'compute', icon: 'üíª', description: 'High-performance VFX rendering' });
        }
        
        if (document.getElementById('music-required')?.checked) {
            additionalServers.push({ id: 'audio-server', name: 'Audio Processing Server', type: 'audio', icon: 'üéµ', description: 'Audio editing and mixing' });
        }
        
        if (document.getElementById('color-grading')?.checked) {
            additionalServers.push({ id: 'color-server', name: 'Color Grading Server', type: 'color', icon: 'üé®', description: 'DaVinci Resolve workstation' });
        }
        
        if (document.getElementById('restoration-required')?.checked) {
            additionalServers.push({ id: 'restoration-server', name: 'Restoration Server', type: 'restoration', icon: 'üîß', description: 'Film restoration and enhancement' });
        }

        const allServers = [...baseServers, ...additionalServers];
        projectServers = allServers;

        // Create server cards
        allServers.forEach(server => {
            const serverCard = createServerCard(server, true);
            recommendedContainer.appendChild(serverCard);
        });
    }

    function createServerCard(server, isRecommended = false) {
        const card = document.createElement('div');
        card.className = isRecommended ? 'server-card selected' : 'server-card';
        card.dataset.serverId = server.id;
        
        if (!isRecommended) {
            card.onclick = () => toggleServerSelection(card, server.id);
        }
        
        card.innerHTML = `
            <div class="server-icon">${server.icon || 'üñ•Ô∏è'}</div>
            <h4>${server.name}</h4>
            <p>${server.description}</p>
            <input type="checkbox" id="${server.id}" ${isRecommended ? 'checked' : ''} style="display: none;">
            ${server.required ? '<small style="color: #28a745; font-weight: 600;">Required</small>' : ''}
            ${isRecommended ? '<small style="color: #667eea; font-weight: 600;">Recommended</small>' : ''}
        `;
        
        return card;
    }

    function toggleServerSelection(card, serverId) {
        const checkbox = document.getElementById(serverId);
        if (checkbox) {
            checkbox.checked = !checkbox.checked;
            card.classList.toggle('selected', checkbox.checked);
        }
    }

    function addCustomServer() {
        const customContainer = document.getElementById('custom-servers-container');
        const customList = document.getElementById('custom-servers-list');
        
        if (!customContainer || !customList) return;
        
        const serverName = prompt('Enter custom server name:');
        if (serverName) {
            const customServer = {
                id: `custom-${customServerCounter++}`,
                name: serverName,
                type: 'custom',
                icon: '‚öôÔ∏è',
                description: 'Custom server configuration'
            };
            
            const serverCard = createServerCard(customServer, false);
            customList.appendChild(serverCard);
            customContainer.style.display = 'block';
            projectServers.push(customServer);
        }
    }

    function showAddMemberModal() {
        const modal = document.getElementById('add-member-modal');
        if (modal) {
            modal.classList.add('show');
            populateStaffGrid();
            resetMemberForm();
        }
    }

    function closeAddMemberModal() {
        const modal = document.getElementById('add-member-modal');
        if (modal) {
            modal.classList.remove('show');
            resetMemberForm();
        }
    }

    function resetMemberForm() {
        selectedStaffMember = null;
        const assignmentDiv = document.getElementById('member-assignment');
        if (assignmentDiv) assignmentDiv.style.display = 'none';
        
        const roleSelect = document.getElementById('member-role');
        const taskInput = document.getElementById('initial-task');
        if (roleSelect) roleSelect.value = '';
        if (taskInput) taskInput.value = '';
        
        document.querySelectorAll('.staff-card').forEach(card => card.classList.remove('selected'));
        document.querySelectorAll('.server-chip').forEach(chip => chip.classList.remove('selected'));
    }

    function populateStaffGrid() {
        const grid = document.getElementById('staff-grid');
        if (!grid) return;
        
        grid.innerHTML = '';

        staffDatabase.forEach(staff => {
            if (!teamMembers.find(member => member.id === staff.id)) {
                const card = document.createElement('div');
                card.className = 'staff-card';
                card.onclick = () => selectStaffMember(staff, card);
                
                card.innerHTML = `
                    <div class="team-member-info">
                        <div class="member-avatar">${staff.name.split(' ').map(n => n[0]).join('')}</div>
                        <div class="member-details">
                            <h4>${staff.name}</h4>
                            <div class="member-role">${staff.role} - ${staff.department}</div>
                            <div style="font-size: 0.8rem; color: #6c757d; margin-top: 5px;">
                                ${staff.skills.join(', ')}
                            </div>
                        </div>
                        <div class="availability-indicator ${staff.availability}"></div>
                    </div>
                `;
                
                grid.appendChild(card);
            }
        });
    }

    function selectStaffMember(staff, card) {
        document.querySelectorAll('.staff-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        selectedStaffMember = staff;
        
        const assignmentDiv = document.getElementById('member-assignment');
        if (assignmentDiv) assignmentDiv.style.display = 'block';
    }

    function filterStaff() {
        const searchInput = document.getElementById('staff-search');
        if (!searchInput) return;
        
        const searchTerm = searchInput.value.toLowerCase();
        document.querySelectorAll('.staff-card').forEach(card => {
            const text = card.textContent.toLowerCase();
            card.style.display = text.includes(searchTerm) ? 'block' : 'none';
        });
    }

    function toggleServerChip(chip, serverId) {
        chip.classList.toggle('selected');
    }

    function addTeamMember() {
        if (!selectedStaffMember) {
            alert('Please select a staff member');
            return;
        }

        const roleSelect = document.getElementById('member-role');
        if (!roleSelect || !roleSelect.value) {
            alert('Please select a project role');
            return;
        }

        const taskInput = document.getElementById('initial-task');
        const initialTask = taskInput ? taskInput.value : '';
        const selectedServers = Array.from(document.querySelectorAll('.server-chip.selected')).map(chip => chip.dataset.server);

        teamMembers.push({
            ...selectedStaffMember,
            projectRole: roleSelect.value,
            initialTask: initialTask,
            serverAccess: selectedServers
        });

        updateTeamMembersDisplay();
        closeAddMemberModal();
    }

    function updateTeamMembersDisplay() {
        const container = document.getElementById('team-members-container');
        const emptyState = document.getElementById('empty-team-state');
        
        if (!container || !emptyState) return;

        if (teamMembers.length === 0) {
            emptyState.style.display = 'block';
            return;
        }

        emptyState.style.display = 'none';
        
        // Clear existing member cards
        container.querySelectorAll('.team-member-card').forEach(card => card.remove());

        teamMembers.forEach((member, index) => {
            const memberCard = document.createElement('div');
            memberCard.className = 'team-member-card';
            
            memberCard.innerHTML = `
                <div class="team-member-info">
                    <div class="member-avatar">${member.name.split(' ').map(n => n[0]).join('')}</div>
                    <div class="member-details">
                        <h4>${member.name}</h4>
                        <div class="member-role">${member.projectRole} - ${member.department}</div>
                        <div style="font-size: 0.8rem; color: #6c757d; margin-top: 5px;">
                            ${member.initialTask || 'No initial task assigned'}
                        </div>
                        <div style="font-size: 0.8rem; color: #667eea; margin-top: 5px;">
                            Server Access: ${member.serverAccess.length} servers
                        </div>
                    </div>
                    <div class="availability-indicator ${member.availability}"></div>
                </div>
                <button type="button" class="btn btn-secondary" onclick="removeTeamMember(${index})" style="padding: 5px 10px; font-size: 0.8rem;">
                    Remove
                </button>
            `;
            
            container.appendChild(memberCard);
        });
    }

    function removeTeamMember(index) {
        teamMembers.splice(index, 1);
        updateTeamMembersDisplay();
    }

    function updateSummary() {
        // Project details
        const fields = [
            { input: 'project-name', output: 'summary-name', transform: v => v || '-' },
            { input: 'project-type', output: 'summary-type', transform: v => document.getElementById('project-type')?.selectedOptions[0]?.text || '-' },
            { input: 'project-priority', output: 'summary-priority', transform: v => document.getElementById('project-priority')?.selectedOptions[0]?.text || 'Normal' },
            { input: 'client-name', output: 'summary-client', transform: v => v || '-' },
            { input: 'film-duration', output: 'summary-duration', transform: v => v ? `${v} minutes` : 'Not specified' }
        ];

        fields.forEach(field => {
            const inputEl = document.getElementById(field.input);
            const outputEl = document.getElementById(field.output);
            if (inputEl && outputEl) {
                outputEl.textContent = field.transform(inputEl.value);
            }
        });

        // Dates
        const startDate = document.getElementById('production-start')?.value;
        const endDate = document.getElementById('production-end')?.value;
        const summaryDates = document.getElementById('summary-dates');
        if (summaryDates) {
            summaryDates.textContent = startDate && endDate ? `${startDate} to ${endDate}` : '-';
        }

        // Requirements
        const requirements = [
            { checkbox: 'silent-film', summary: 'summary-silent' },
            { checkbox: 'music-required', summary: 'summary-music' },
            { checkbox: 'vfx-required', summary: 'summary-vfx' },
            { checkbox: 'restoration-required', summary: 'summary-restoration' },
            { checkbox: 'color-grading', summary: 'summary-color' }
        ];

        requirements.forEach(req => {
            const checkbox = document.getElementById(req.checkbox);
            const summary = document.getElementById(req.summary);
            if (checkbox && summary) {
                summary.textContent = checkbox.checked ? 'Yes' : 'No';
            }
        });

        // Team
        const pmSelect = document.getElementById('project-manager');
        const summaryPm = document.getElementById('summary-pm');
        if (pmSelect && summaryPm) {
            summaryPm.textContent = pmSelect.selectedOptions[0]?.text.split(' (')[0] || '-';
        }
        
        const leadSelect = document.getElementById('team-lead');
        const summaryLead = document.getElementById('summary-lead');
        if (leadSelect && summaryLead) {
            summaryLead.textContent = leadSelect.selectedOptions[0]?.text.split(' (')[0] || 'Not assigned';
        }

        const summaryTeam = document.getElementById('summary-team');
        if (summaryTeam) {
            summaryTeam.textContent = `${teamMembers.length} selected`;
        }

        // Servers
        const summaryServers = document.getElementById('summary-servers');
        if (summaryServers) {
            summaryServers.textContent = `${projectServers.length} configured`;
        }

        // Calculate final budget
        calculateFinalBudget();
    }

    function calculateFinalBudget() {
        let totalCost = 10000; // Base cost
        
        const duration = parseInt(document.getElementById('film-duration')?.value || '60');
        totalCost += duration * 200;
        
        if (document.getElementById('music-required')?.checked) {
            totalCost += 5000;
        }
        
        if (document.getElementById('vfx-required')?.checked) {
            const complexity = document.getElementById('vfx-complexity')?.value || 'basic';
            const vfxCosts = { basic: 8000, intermediate: 20000, advanced: 50000 };
            totalCost += vfxCosts[complexity];
        }
        
        if (document.getElementById('restoration-required')?.checked) {
            totalCost += duration * 300;
        }
        
        if (document.getElementById('color-grading')?.checked) {
            totalCost += duration * 100;
        }
        
        totalCost += teamMembers.length * 2000;
        totalCost += projectServers.length * 1000;
        
        const budgetEl = document.getElementById('estimated-budget');
        if (budgetEl) {
            budgetEl.textContent = `${totalCost.toLocaleString()}`;
        }
    }

    function createProject() {
        const projectName = document.getElementById('project-name')?.value || 'New Project';
        const btn = document.getElementById('next-btn');
        
        if (btn) {
            const originalText = btn.textContent;
            btn.textContent = 'Creating Project...';
            btn.disabled = true;
            
            setTimeout(() => {
                alert(`Project "${projectName}" has been created successfully!\n\n` +
                      `‚Ä¢ Server credentials have been generated\n` +
                      `‚Ä¢ Team notifications have been sent\n` +
                      `‚Ä¢ Project dashboard is now active\n\n` +
                      `You will be redirected to the project dashboard.`);
                
                btn.textContent = originalText;
                btn.disabled = false;
            }, 2000);
        }
    }

    // Auto-generate project code
    const projectNameInput = document.getElementById('project-name');
    const projectCodeInput = document.getElementById('project-code');
    if (projectNameInput && projectCodeInput) {
        projectNameInput.addEventListener('input', function() {
            const name = this.value.trim();
            if (name) {
                const code = name.substring(0, 3).toUpperCase() + '-' + 
                           new Date().getFullYear() + '-' + 
                           Math.random().toString(36).substring(2, 5).toUpperCase();
                projectCodeInput.value = code;
            } else {
                projectCodeInput.value = '';
            }
        });
    }

    // Set date constraints
    const today = new Date().toISOString().split('T')[0];
    const startDateInput = document.getElementById('production-start');
    const endDateInput = document.getElementById('production-end');
    
    if (startDateInput) {
        startDateInput.min = today;
        startDateInput.addEventListener('change', function() {
            if (endDateInput) {
                endDateInput.min = this.value;
            }
        });
    }
    
    if (endDateInput) {
        endDateInput.min = today;
    }

    // Initialize form
    updateProgressBar();
    showStep(1);

    // Add event listeners for budget updates
    ['film-duration', 'vfx-required', 'music-required', 'restoration-required', 'color-grading', 'vfx-complexity'].forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            element.addEventListener('change', () => {
                if (currentStep === 3) {
                    updateBudgetBreakdown();
                }
            });
        }
    });
</script>
</body>
</html>